{"ast":null,"code":"import React,{useEffect}from'react';import{Routes,Route,Navigate,useNavigate}from'react-router-dom';import{useAuthStore}from'./stores/authStore';import Layout from'./components/Layout';import Login from'./pages/auth/Login';import Register from'./pages/auth/Register';import Dashboard from'./pages/Dashboard';import Groups from'./pages/Groups';import GroupDetails from'./pages/GroupDetails';import Transactions from'./pages/Transactions';import Payments from'./pages/Payments';import Profile from'./pages/Profile';import AdminDashboard from'./pages/admin/AdminDashboard';import AdminUsers from'./pages/admin/AdminUsers';import AdminGroups from'./pages/admin/AdminGroups';// Protected Route Component\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,allowedRoles=[]}=_ref;const{user,isAuthenticated}=useAuthStore();if(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}if(allowedRoles.length>0&&!allowedRoles.includes(user===null||user===void 0?void 0:user.role)){return/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true});}return children;};function App(){const navigate=useNavigate();const{isAuthenticated,checkAuth}=useAuthStore();useEffect(()=>{// Check authentication status when app loads\nconst initAuth=async()=>{try{const isValid=await checkAuth();if(!isValid&&window.location.pathname!=='/login'&&window.location.pathname!=='/register'){navigate('/login');}}catch(error){console.error('Auth initialization error:',error);navigate('/login');}};initAuth();},[checkAuth,navigate]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:isAuthenticated?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true}):/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:isAuthenticated?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true}):/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsxs(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Layout,{})}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"groups\",element:/*#__PURE__*/_jsx(Groups,{})}),/*#__PURE__*/_jsx(Route,{path:\"groups/:groupId\",element:/*#__PURE__*/_jsx(GroupDetails,{})}),/*#__PURE__*/_jsx(Route,{path:\"transactions\",element:/*#__PURE__*/_jsx(Transactions,{})}),/*#__PURE__*/_jsx(Route,{path:\"payments\",element:/*#__PURE__*/_jsx(Payments,{})}),/*#__PURE__*/_jsx(Route,{path:\"profile\",element:/*#__PURE__*/_jsx(Profile,{})})]}),/*#__PURE__*/_jsxs(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['admin'],children:/*#__PURE__*/_jsx(Layout,{})}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(Navigate,{to:\"/admin/dashboard\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"dashboard\",element:/*#__PURE__*/_jsx(AdminDashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"users\",element:/*#__PURE__*/_jsx(AdminUsers,{})}),/*#__PURE__*/_jsx(Route,{path:\"groups\",element:/*#__PURE__*/_jsx(AdminGroups,{})})]}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})})]})});}export default App;","map":{"version":3,"names":["React","useEffect","Routes","Route","Navigate","useNavigate","useAuthStore","Layout","Login","Register","Dashboard","Groups","GroupDetails","Transactions","Payments","Profile","AdminDashboard","AdminUsers","AdminGroups","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","allowedRoles","user","isAuthenticated","to","replace","length","includes","role","App","navigate","checkAuth","initAuth","isValid","window","location","pathname","error","console","className","path","element","index"],"sources":["C:/Users/kelvin/Desktop/kijumbe/frontend/src/App.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { Routes, Route, Navigate, useNavigate } from 'react-router-dom';\nimport { useAuthStore } from './stores/authStore';\nimport Layout from './components/Layout';\nimport Login from './pages/auth/Login';\nimport Register from './pages/auth/Register';\nimport Dashboard from './pages/Dashboard';\nimport Groups from './pages/Groups';\nimport GroupDetails from './pages/GroupDetails';\nimport Transactions from './pages/Transactions';\nimport Payments from './pages/Payments';\nimport Profile from './pages/Profile';\nimport AdminDashboard from './pages/admin/AdminDashboard';\nimport AdminUsers from './pages/admin/AdminUsers';\nimport AdminGroups from './pages/admin/AdminGroups';\n\n// Protected Route Component\nconst ProtectedRoute = ({ children, allowedRoles = [] }) => {\n  const { user, isAuthenticated } = useAuthStore();\n  \n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" replace />;\n  }\n  \n  if (allowedRoles.length > 0 && !allowedRoles.includes(user?.role)) {\n    return <Navigate to=\"/dashboard\" replace />;\n  }\n  \n  return children;\n};\n\nfunction App() {\n  const navigate = useNavigate();\n  const { isAuthenticated, checkAuth } = useAuthStore();\n\n  useEffect(() => {\n    // Check authentication status when app loads\n    const initAuth = async () => {\n      try {\n        const isValid = await checkAuth();\n        if (!isValid && window.location.pathname !== '/login' && window.location.pathname !== '/register') {\n          navigate('/login');\n        }\n      } catch (error) {\n        console.error('Auth initialization error:', error);\n        navigate('/login');\n      }\n    };\n    initAuth();\n  }, [checkAuth, navigate]);\n\n  return (\n    <div className=\"App\">\n      <Routes>\n        {/* Public Routes */}\n        <Route path=\"/login\" element={\n          isAuthenticated ? <Navigate to=\"/dashboard\" replace /> : <Login />\n        } />\n        <Route path=\"/register\" element={\n          isAuthenticated ? <Navigate to=\"/dashboard\" replace /> : <Register />\n        } />\n        \n        {/* Protected Routes */}\n        <Route path=\"/\" element={\n          <ProtectedRoute>\n            <Layout />\n          </ProtectedRoute>\n        }>\n          <Route index element={<Navigate to=\"/dashboard\" replace />} />\n          <Route path=\"dashboard\" element={<Dashboard />} />\n          <Route path=\"groups\" element={<Groups />} />\n          <Route path=\"groups/:groupId\" element={<GroupDetails />} />\n          <Route path=\"transactions\" element={<Transactions />} />\n          <Route path=\"payments\" element={<Payments />} />\n          <Route path=\"profile\" element={<Profile />} />\n        </Route>\n        \n        {/* Admin Routes */}\n        <Route path=\"/admin\" element={\n          <ProtectedRoute allowedRoles={['admin']}>\n            <Layout />\n          </ProtectedRoute>\n        }>\n          <Route index element={<Navigate to=\"/admin/dashboard\" replace />} />\n          <Route path=\"dashboard\" element={<AdminDashboard />} />\n          <Route path=\"users\" element={<AdminUsers />} />\n          <Route path=\"groups\" element={<AdminGroups />} />\n        </Route>\n        \n        {/* Catch all route */}\n        <Route path=\"*\" element={<Navigate to=\"/dashboard\" replace />} />\n      </Routes>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}